/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var A=Object.create;var m=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var x=n=>m(n,"__esModule",{value:!0});var q=(n,e)=>{x(n);for(var i in e)m(n,i,{get:e[i],enumerable:!0})},$=(n,e,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of L(e))!H.call(n,t)&&t!=="default"&&m(n,t,{get:()=>e[t],enumerable:!(i=M(e,t))||i.enumerable});return n},E=n=>$(x(m(n!=null?A(P(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);q(exports,{default:()=>S});var C=E(require("obsidian"));var l=E(require("obsidian"));var d;(function(t){t.DEFAULT="default",t.RECENCY="recency",t.FREQUENCY="frequency"})(d||(d={}));var w={maxResults:10,expandTargetFolder:!0,debugMode:!1,folderDisplayMode:d.DEFAULT,recentFoldersToShow:5,frequentFoldersToShow:5,folderHistory:{}};var v=class extends l.PluginSettingTab{constructor(e,i){super(e,i);this.plugin=i}updateSettingsVisibility(e){!this.recentFoldersSettingEl||!this.frequentFoldersSettingEl||!this.resetHistorySettingEl||(e===d.RECENCY?(this.recentFoldersSettingEl.style.display="block",this.frequentFoldersSettingEl.style.display="none"):e===d.FREQUENCY?(this.recentFoldersSettingEl.style.display="none",this.frequentFoldersSettingEl.style.display="block"):(this.recentFoldersSettingEl.style.display="none",this.frequentFoldersSettingEl.style.display="none"),e===d.DEFAULT?this.resetHistorySettingEl.style.display="none":this.resetHistorySettingEl.style.display="block")}display(){let{containerEl:e}=this;e.empty(),new l.Setting(e).setName("Maximum results").setDesc("Maximum number of folders to show in search results").addSlider(i=>i.setLimits(5,50,5).setValue(this.plugin.settings.maxResults).setDynamicTooltip().onChange(async t=>{this.plugin.settings.maxResults=t,await this.plugin.saveSettings()})),new l.Setting(e).setName("Expand target folder on navigation").setDesc("When enabled, folders will be automatically expanded when you navigate to them").addToggle(i=>i.setValue(this.plugin.settings.expandTargetFolder).onChange(async t=>{this.plugin.settings.expandTargetFolder=t,await this.plugin.saveSettings()})),new l.Setting(e).setName("Folder display preferences").setHeading(),new l.Setting(e).setName("Display priority").setDesc("Control which folders appear at the top of the suggestion list before searching").addDropdown(i=>{i.addOption(d.DEFAULT,"Default order (alphabetical)").addOption(d.RECENCY,"Recently visited first").addOption(d.FREQUENCY,"Frequently visited first").setValue(this.plugin.settings.folderDisplayMode).onChange(async t=>{this.plugin.settings.folderDisplayMode=t,await this.plugin.saveSettings(),this.updateSettingsVisibility(t)})}),this.recentFoldersSettingEl=e.createDiv(),new l.Setting(this.recentFoldersSettingEl).setName("Recent folders to show").setDesc("Number of recently visited folders to display at the top when using 'Recently visited first' mode").addSlider(i=>i.setLimits(1,20,1).setValue(this.plugin.settings.recentFoldersToShow).setDynamicTooltip().onChange(async t=>{this.plugin.settings.recentFoldersToShow=t,await this.plugin.saveSettings()})),this.frequentFoldersSettingEl=e.createDiv(),new l.Setting(this.frequentFoldersSettingEl).setName("Frequent folders to show").setDesc("Number of frequently visited folders to display at the top when using 'Frequently visited first' mode").addSlider(i=>i.setLimits(1,20,1).setValue(this.plugin.settings.frequentFoldersToShow).setDynamicTooltip().onChange(async t=>{this.plugin.settings.frequentFoldersToShow=t,await this.plugin.saveSettings()})),this.resetHistorySettingEl=e.createDiv(),new l.Setting(this.resetHistorySettingEl).setName("Reset folder history").setDesc("Clear the tracked history of visited folders. Warning: This will remove all recency and frequency data.").addButton(i=>i.setButtonText("Reset").setWarning().onClick(async()=>{let t=new l.Modal(this.app);t.titleEl.setText("Reset folder history"),t.contentEl.createEl("p",{text:"Are you sure? This will permanently delete all folder navigation history including recently visited and frequently used folder data.",cls:"mod-warning"});let r=t.contentEl.createDiv({cls:"modal-button-container"});r.createEl("button",{text:"Cancel"}).addEventListener("click",()=>{t.close()}),r.createEl("button",{text:"Reset folder history",cls:"mod-warning"}).addEventListener("click",async()=>{this.plugin.settings.folderHistory={},await this.plugin.saveSettings(),t.close(),new l.Notice("Folder history has been reset")}),t.open()})),this.updateSettingsVisibility(this.plugin.settings.folderDisplayMode),new l.Setting(e).setName("Advanced").setHeading(),new l.Setting(e).setName("Debug mode").setDesc("Enable detailed logging to console for troubleshooting issues. This may affect performance and should be disabled during normal use.").addToggle(i=>i.setValue(this.plugin.settings.debugMode).onChange(async t=>{this.plugin.settings.debugMode=t,await this.plugin.saveSettings()}))}};var b=E(require("obsidian"));function s(n,e,...i){e.settings.debugMode&&console.log(n,...i)}function u(n,...e){console.error(n,...e)}var T=class extends b.FuzzySuggestModal{constructor(e,i){super(e);this.sortedFolders=[];this.plugin=i,this.setPlaceholder("Type folder name..."),this.folders=this.getAllFolders(),this.sortedFolders=this.getSortedFolders(),this.limit=this.plugin.settings.maxResults}getAllFolders(){return this.app.vault.getAllFolders()}getSortedFolders(){let e=this.getAllFolders(),i=this.plugin.settings.folderDisplayMode;if(s(`Sorting folders using display mode: ${i}`,this.plugin),i===d.DEFAULT)return e;let t=this.plugin.settings.folderHistory;if(i===d.RECENCY){let r=this.plugin.settings.recentFoldersToShow,a=e.filter(o=>t[o.path]).sort((o,g)=>{var f,y;let F=((f=t[o.path])==null?void 0:f.lastAccessed)||0;return(((y=t[g.path])==null?void 0:y.lastAccessed)||0)-F}).slice(0,r),c=new Set(a.map(o=>o.path)),h=e.filter(o=>!c.has(o.path));if(s(`Found ${a.length} recent folders to display`,this.plugin),a.length>0){let o={};o._isSeparator=!0,o._separatorText="\u2014 Recently visited folders \u2014";let g={};return g._isSeparator=!0,g._separatorText="\u2014 All folders \u2014",[o,...a,g,...h]}return e}if(i===d.FREQUENCY){let r=this.plugin.settings.frequentFoldersToShow,a=e.filter(o=>t[o.path]).sort((o,g)=>{var f,y;let F=((f=t[o.path])==null?void 0:f.accessCount)||0;return(((y=t[g.path])==null?void 0:y.accessCount)||0)-F}).slice(0,r),c=new Set(a.map(o=>o.path)),h=e.filter(o=>!c.has(o.path));if(s(`Found ${a.length} frequent folders to display`,this.plugin),a.length>0){let o={};o._isSeparator=!0,o._separatorText="\u2014 Frequently visited folders \u2014";let g={};return g._isSeparator=!0,g._separatorText="\u2014 All folders \u2014",[o,...a,g,...h]}return e}return e}updateFolderHistory(e){let i=e.path,t=this.plugin.settings.folderHistory[i]||{lastAccessed:0,accessCount:0};t.lastAccessed=Date.now(),t.accessCount+=1,this.plugin.settings.folderHistory[i]=t,this.plugin.saveSettings(),s(`Updated folder history for "${i}": ${JSON.stringify(t)}`,this.plugin)}getItems(){return this.sortedFolders}getItemText(e){return e._isSeparator?e._separatorText:e.path}getParentFolderChain(e){let i=[],t=e.parent;for(;t;)i.unshift(t),t=t.parent;return i}getFileExplorer(){var e,i;try{let t=this.app;if(!((i=(e=t.internalPlugins)==null?void 0:e.plugins["file-explorer"])==null?void 0:i.instance))return u("Could not find file explorer plugin instance"),null;let r=t.internalPlugins.plugins["file-explorer"].instance;if(typeof r.revealInFolder!="function")return u("revealInFolder method not found on file explorer instance"),null;if(this.plugin.settings.debugMode){s("File explorer instance methods:",this.plugin);let p=Object.getOwnPropertyNames(Object.getPrototypeOf(r));if(s(p.join(", "),this.plugin),r.view){s("File explorer view methods:",this.plugin);let a=Object.getOwnPropertyNames(Object.getPrototypeOf(r.view));s(a.join(", "),this.plugin)}}return r}catch(t){return u(`Error accessing file explorer: ${t}`),null}}onChooseItem(e,i){if(!e._isSeparator){s(`Folder selected: "${e.path}" (name: "${e.name}")`,this.plugin);try{this.updateFolderHistory(e),this.close();let t=this.app.workspace.getLeavesOfType("file-explorer");if(t.length===0){u("No file explorer leaf found");return}let r=t[0];this.app.workspace.revealLeaf(r),s("File explorer leaf revealed",this.plugin);let p=this.getFileExplorer();if(!p){u("Failed to get file explorer instance");return}s(`Revealing folder in explorer: "${e.path}"`,this.plugin),p.revealInFolder(e),setTimeout(()=>{if(this.plugin.settings.expandTargetFolder){s(`Expanding parent folders for: "${e.path}"`,this.plugin);let a=this.getParentFolderChain(e);s(`Parent chain: ${a.map(c=>c.name).join(" -> ")}`,this.plugin),a.forEach((c,h)=>{setTimeout(()=>{this.expandFolderByDOMClick(c.name)},h*50)}),setTimeout(()=>{s(`Expanding target folder: "${e.name}"`,this.plugin),this.expandFolderByDOMClick(e.name),setTimeout(()=>{this.highlightFolderInDOM(e.name)},200)},a.length*50+100)}else setTimeout(()=>{this.highlightFolderInDOM(e.name)},200)},100)}catch(t){u(`Error in folder navigation: ${t}`)}}}expandFolderByDOMClick(e){try{s(`Looking for folder to expand: "${e}"`,this.plugin);let i=document.querySelectorAll(".nav-folder-title-content");for(let t of Array.from(i))if(t.textContent===e){s(`Found folder title content: "${e}"`,this.plugin);let r=t.closest(".nav-folder-title");if(!(r instanceof HTMLElement)){s(`Could not find title element for: "${e}"`,this.plugin);continue}let p=t.closest(".nav-folder");if(!(p instanceof HTMLElement)){s(`Could not find folder element for: "${e}"`,this.plugin);continue}if(p.classList.contains("is-collapsed")){s(`Folder is collapsed, clicking title to expand: "${e}"`,this.plugin),r.click();return}else{s(`Folder already expanded: "${e}"`,this.plugin);return}}s(`Could not find folder with name: "${e}"`,this.plugin)}catch(i){u(`Error expanding folder: ${i}`)}}highlightFolderInDOM(e){try{s(`Looking for folder to highlight: "${e}"`,this.plugin);let i=document.querySelectorAll(".nav-folder-title-content");for(let t of Array.from(i))if(t.textContent===e){s(`Found folder to highlight: "${e}"`,this.plugin);let r=t.closest(".nav-folder-title");if(!(r instanceof HTMLElement))continue;r.scrollIntoView({behavior:"smooth",block:"center"}),r.classList.add("nav-folder-title-highlighted"),setTimeout(()=>{r.classList.remove("nav-folder-title-highlighted")},2e3);return}s(`Could not find folder to highlight: "${e}"`,this.plugin)}catch(i){u(`Error highlighting folder: ${i}`)}}renderSuggestion(e,i){if(e.item._isSeparator){i.empty(),i.createDiv({cls:"folder-separator"}).setText(e.item._separatorText);return}super.renderSuggestion(e,i)}};var S=class extends C.Plugin{async onload(){await this.loadSettings(),this.addSettingTab(new v(this.app,this)),this.addCommand({id:"open-folder-navigator",name:"Navigate to folder",callback:()=>{new T(this.app,this).open()}})}onunload(){}async loadSettings(){this.settings=Object.assign({},w,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};0&&(module.exports={});

/* nosourcemap */